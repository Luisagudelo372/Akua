{% extends 'core/base.html' %}
{% load static %}

{% block title %}Akua — Home{% endblock %}
{% block content %}
<section class="hero" style="background-image:url('{% static 'core/img/stunning-mountain-landscape-with-peaks-and-valleys.jpg' %}');">
  <div class="hero-inner container d-flex flex-column align-items-center justify-content-center text-white text-center" style="min-height:58vh">
    <h1 class="display-4 fw-bolder">Use the power of AI to make the most out of your next trip</h1>

    <div class="search-pill mt-4 w-100 w-md-75 w-lg-50">
      <form id="homeSearchForm" class="row g-2 align-items-center px-2">
        <div class="col-12 col-md">
          <small class="text-secondary d-block">Where</small>
          <input id="whereInput" name="where" class="form-control border-0 ps-0" placeholder="Search destinations">
        </div>

        <div class="col-auto d-none d-md-flex align-items-center"><div class="divider"></div></div>

        <div class="col-12 col-md">
          <small class="text-secondary d-block">When</small>
          <input id="whenInput" name="when" class="form-control border-0 ps-0 js-date" placeholder="Select period">
        </div>

        <div class="col-auto d-none d-md-flex align-items-center"><div class="divider"></div></div>

        <div class="col-12 col-md">
          <small class="text-secondary d-block">Type</small>
          <select id="typeInput" name="type" class="form-select border-0 ps-0">
            <option value="">All</option>
            <option value="Nature">Nature</option>
            <option value="Culture">Culture</option>
          </select>
        </div>

        <div class="col-12 col-md-auto">
          <button type="submit" class="btn btn-akua rounded-pill px-4">Browse Trip</button>
        </div>
      </form>
    </div>
  </div>
</section>

<section class="section-slope">
  <div class="container">
    <h2 class="h4 fw-semibold mb-0">Popular things to do</h2>
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const form = document.getElementById('homeSearchForm');
  
  form.addEventListener('submit', (e) => {
    e.preventDefault();
    
    // Obtener solo el valor de "where"
    const where = document.getElementById('whereInput').value.trim();
    
    // Construir la URL con parámetros
    const params = new URLSearchParams();
    if (where) params.append('where', where);
    
    // Redirigir a donde-ir con los parámetros
    const url = "{% url 'donde_ir' %}" + (params.toString() ? '?' + params.toString() : '');
    window.location.href = url;
  });
});
</script>
{% endblock %}